<section class="content">
  <div class="content-block">
    <div class="block-header">
      <!-- breadcrumb -->
      <app-breadcrumb [title]="'Dashboard'" [items]="[]" [active_item]="'Promocode Management'"></app-breadcrumb>
    </div>
    <div class="row clearfix">
      <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
        <div class="card">
          <div class="body">
            <div class="body table-responsive">
              <div class="row align-items-center">
                <div class="col-md-6">
                  <mat-form-field class="example-full-width formField" appearance="outline">
                    <mat-label>Filter</mat-label>
                    <input matInput (keyup)="applyFilter($event)" placeholder="Ex. John" autocomplete="off" />
                  </mat-form-field>
                </div>
                <div class="col-md-6 text-end">
                  <button mat-raised-button color="primary" type="button" [routerLink]="['../add-promocode']">Add Promo Code</button>
                </div>
              </div>

              <table mat-table [dataSource]="dataSource3" class="w-100" matSort #empTbSort="matSort">
                <!-- No Column -->
                <ng-container matColumnDef="no">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header> S.No. </th>
                  <td mat-cell *matCellDef="let element; let i = index;"> {{ i + 1 }} </td>
                </ng-container>
                 <!-- Image Column -->
                 <ng-container matColumnDef="banner_image_name">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header> Image </th>
                  <td mat-cell *matCellDef="let element" class="table-img"><img width="40" src="{{imageURL+element.banner_image_name }}" /></td>
               </ng-container>
                <!-- promoCo de Column -->
                <ng-container matColumnDef="promo_code_for">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header>Promo Code For</th>
                  <td mat-cell *matCellDef="let element">{{element.promo_code_for | titlecase}}</td>
                </ng-container>

                   <!-- promoCodeFor Column -->
                   <ng-container matColumnDef="promo_code">
                      <th mat-header-cell *matHeaderCellDef mat-sort-header>Promo Code </th>
                      <td mat-cell *matCellDef="let element">{{element.promo_code}}</td>
                    </ng-container>
               
                <!-- Offer_type Column -->
                <ng-container matColumnDef="discount_type">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header>Offer Type</th>
                  <td mat-cell *matCellDef="let element">{{
                      element.discount_type == "percent" ? "By %" : "By Flat"
                      }}</td>
                </ng-container>
                <!-- Offer Column -->
                <ng-container matColumnDef="offer">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header>Offer </th>
                  <td mat-cell *matCellDef="let element">{{
                      element.discount_type == "percent"
                      ? element.discount_rate + " %"
                      : element.discount_price + " rs Off"
                      }}</td>
                </ng-container>
                <!-- startDate Column -->
                <ng-container matColumnDef="validity_start_date">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header>Validity Start Date</th>
                  <td mat-cell *matCellDef="let element">{{element.validity_start_date | date: "dd/MM/yyyy"}}</td>
                </ng-container>
                <!-- endDate Column -->
                <ng-container matColumnDef="validity_end_date">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header>Validity End Date</th>
                  <td mat-cell *matCellDef="let element">{{element.validity_end_date | date: "dd/MM/yyyy"}}</td>
                </ng-container>
                <!-- uses_times Column -->
                <ng-container matColumnDef="max_uses">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header>No. of Users</th>
                  <td mat-cell *matCellDef="let element">{{element.max_uses}}</td>
                </ng-container>
                <!-- description Column -->
                <ng-container matColumnDef="description">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header>Description</th>
                  <td mat-cell *matCellDef="let element">{{element.description}}</td>
                </ng-container>
              
                <!-- pricerange Column -->
                <ng-container matColumnDef="price">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header>Start price</th>
                  <td mat-cell *matCellDef="let element">&#x20b9; {{element.price}}</td>
                </ng-container>
                <ng-container matColumnDef="action">
                  <th mat-header-cell *matHeaderCellDef>Action</th>
                  <td mat-cell *matCellDef="let element">
                    <span class="d-flex" >
                      <button class="btn tblActnBtn h-auto  checkIcon" *ngIf="compareDate(currentDate,element.validity_end_date,1)" matTooltip="Edit" [routerLink]="['../edit-promocode/'+element.id]">
                        <i class="material-icons">edit</i>
                      </button>
                      <span class="text-danger" *ngIf="compareDate(currentDate,element.validity_end_date,2)">
                        <b>Expired</b>  
                      </span>
                      <button class="btn tblActnBtn h-auto  cancelIcon" (click)="open(mymodal); getdeleteID(element.id)" matTooltip="Delete">
                        <i class="material-icons">delete</i>
                      </button>
                    </span>
                  </td>
                </ng-container>
                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
              </table>
              <mat-paginator [pageSizeOptions]="[10, 20, 25]" showFirstLastButtons>
              </mat-paginator>
            </div>
            <!-- Add content here -->
          </div>
        </div>
      </div>
    </div>
  </div>

  
<!-- Delete Pop -->

<ng-template #mymodal let-modal>
  <div class="modal-header">
    <h4 class="modal-title" id="modal-basic-title">Delete Confirmation</h4>
  </div>
  <div class="modal-body">Are You sure you want to delete?</div>
  <div class="modal-footer">
    <button type="button" class="btn btn-outline-dark" (click)="modal.close('Save click'); deleteRecord()">
      Ok
    </button>

    <button type="button" class="btn btn-outline-dark" (click)="modal.dismiss('Cross click')">
      Cancel
    </button>
  </div>
</ng-template>
</section>
